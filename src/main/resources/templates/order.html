<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>

</head>
<body>
<h1>ORDERS BY CUSTOMER</h1>

<form th:action="@{/orders/{customerNumber}(customerNumber=${customerForm.customerNumber})}" method="post" th:object="${customerForm}">
    <h3>Enter Customer Number: </h3>
    <input class="form-control" name="customerNumber" th:field="${customerForm.customerNumber}">
    <p th:each="err : ${#fields.errors('customerNumber')}" th:text="${err}" />
    <button type="submit">Submit</button>
</form>

    <h2 th:text="${error_message}"></h2>

    </br>
    <h4>List order of customer</h4>
    <table  border="1" class="table-responsive-2">
    <thead class="thead-dark">
    <tr>
        <th scope="col">No</th>
        <th scope="col">Order Number</th>
        <th scope="col">Order Date</th>
        <th scope="col">Customer Name</th>
        <th scope="col">Phone</th>
        <th scope="col">Country</th>
        <th scope="col">Product</th>
        <th scope="col">Status</th>
    </tr>
    </thead>
    <tbody>

    <tr th:each="order, state : ${orderList}" >
        <td><span th:text="${state.index}" /></td>
        <td><span th:text="${order.order.orderNumber.orderNumber}"></span></td>
        <td><span th:text="${order.order.orderDate}"></span></td>
        <td><span th:text="${order.order.customer.customerName}" /></td>
        <td><span th:text="${order.order.customer.phone}"></span></td>
        <td><span th:text="${order.order.customer.country}"></span></td>
        <td>
            <table>
                <tbody>
                <tr th:each="product, index : ${order.products}">
                    <td th:text="${product.productName}"></td>
                    <td th:text="${product.buyPrice}"></td>
                </tr>
                </tbody>
            </table>
        </td>
        <td th:if="${#strings.contains(order.order.status, 'In Process')}">
            <span style="font-weight: bold; color:red" th:text="${order.order.status}"></span>
        </td>
        <td th:unless="${#strings.contains(order.order.status, 'In Process')}">
            <span th:text="${order.order.status}"></span>
        </td>
    </tr>
    </tbody>
    </table>
</body>
</html>